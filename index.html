<!doctype html>
<html class="no-js" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>IMDECISIVE</title>
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,300,400,500,600,700,800,900&amp;subset=devanagari,latin-ext" rel="stylesheet">
    <link rel="shortcut icon" type="image/icon" href="assets/logo/favicon.png"/>
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/flaticon.css">
    <link rel="stylesheet" href="assets/css/animate.css">
    <link rel="stylesheet" href="assets/css/owl.carousel.min.css">
    <link rel="stylesheet" href="assets/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/bootsnav.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="assets/css/responsive.css">

    <style>
        #dinnerCards {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
        }
        .dinnerCard {
            flex: 0 1 18%;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            margin: 10px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        .dinnerCard:hover {
            transform: scale(1.05);
        }
        .dinnerCard img {
            width: 100%;
            height: auto;
            border-radius: 5px;
        }
        .dinnerCard p {
            margin: 10px 0;
        }
        #matchResults {
            margin-top: 20px;
            padding: 10px;
            background-color: #f2f2f2;
            color: black;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
    </style>
</head>

<body>
    <header class="top-area">
        <div class="header-area">
            <nav class="navbar navbar-default bootsnav navbar-fixed dark no-background">
                <div class="container">
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-menu">
                            <i class="fa fa-bars"></i>
                        </button>
                        <a class="navbar-brand" href="index.html">IMDECISIVE</a>
                    </div>
                    <div class="collapse navbar-collapse menu-ui-design" id="navbar-menu">
                        <ul class="nav navbar-nav navbar-right" data-in="fadeInDown" data-out="fadeOutUp">
                            <li class="smooth-menu"><a href="#HowToUse">How To Use</a></li>
                            <li class="smooth-menu"><a href="#beta">beta</a></li>
                            <li class="smooth-menu"><a href="#contact">contact</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </div>
        <div class="clearfix"></div>
    </header>

    <section id="about" class="about">
        <div class="container">
            <div class="about-content">
                <div class="row">
                    <div class="col-sm-6">
                        <div class="single-about-txt">
                            <h3>Meeting up with friends has always been stressful for me in ONE aspect: What the hell do we eat together?</h3>
                            <p>
                                Sometimes they want pizza, but I don't want pizza unless it's wood fired from an Italian restaurant.<br>
                                Sometimes I want Korean barbeque, but it's expensive for everyone. Also, not everyone eats meat.<br>
                                This back and forth of menu ideas is exhausting every time. We have to consider dietary restrictions, budget, what each person is craving, what each person does not want whatsoever, etc.<br>
                                Thus, this project was born.<br>
                                From being indecisive to saying "I'm Decisive!", this makes your search for a menu that everyone is satisfied with much easier and faster.<br>
                                With a few clicks from each person, you can find all the foods you WANT to have and go from there!<br>
                                Easy Peasy Lemon Squeezy Choice is Breezy!
                            </p>
                        </div>
                    </div>
                    <div class="col-sm-offset-1 col-sm-5">
                        <div class="single-about-img">
                            <img src="assets/images/somuchfood.jpeg" alt="profile_image">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section id="HowToUse" class="how-to-use-section">
        <div class="section-heading text-center">
            <h2>How to Use</h2>
        </div>
        <div class="container">
            <ul>
                <li>This test version is for finding food matches between multiple people.</li>
                <li>One member of the group presses "generate code" to be given a one-time code.</li>
                <li>Everyone in the group submits that code</li>
                <li>Each person chooses all the cards of the foods they are currently down to eat.</li>
                <li>Afterwards, they press “Submit Selection”.</li>
                <li>When everyone is done, press “Show Matches” to see which foods overlap.</li>
                <li>Your search for a dinner menu that both people are excited about has become much easier!</li>
            </ul>
        </div>
    </section>

    <section id="beta" class="skills">
        <div class="skill-content">
            <div class="section-heading text-center">
                <h2>beta</h2>
            </div>
            <div class="container">
                <h3 class="personHeading" id="personHeading">Generate or Enter One-Time Code</h3>
                <button id="generateCode" class="btn btn-primary">Generate Code</button>
                <input type="text" id="sessionCode" placeholder="Enter One-Time Code">
                <button id="startSession" class="btn btn-primary">Start Session</button>
                <h3 class="personHeading" id="personHeading">Make Your Selections</h3>
                <div id="dinnerCards"></div>
                <button id="submitSelection" class="btn btn-primary">Submit Selection</button>
                <button id="showMatches" class="btn btn-primary" disabled>Show Matches</button>
                <div id="matchResults"></div>
            </div>
        </div>
    </section>

    <section id="contact" class="contact">
        <div class="section-heading text-center">
            <h2>Connect With Me</h2>
        </div>
        <div class="container">
            <p>
                This website is on its way to becoming an app.<br>
                The goal is to be able find matches between more than 2 people and have more food options.<br>
                If you would like to get a notification when the app launches, please leave your email in the form below.<br>
                I wont send too many emails to you, so don't worry!<br>
            </p>
            <div class="contact-content">
                <form>
                    <div class="form-row">
                        <div class="col-md-6">
                            <input type="text" class="form-control" id="name" placeholder="Name*" name="name">
                        </div>
                        <div class="col-md-6">
                            <input type="email" class="form-control" id="submit-email" placeholder="Email*" name="email">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="col-12">
                            <textarea class="form-control" rows="8" id="submit-advice" placeholder="Any advice or idea is appreciated!"></textarea>
                        </div>
                    </div>
                    <button type="submit" id="submit">Submit!</button>
                </form>
            </div>
        </div>
    </section>

    <center>
        <button id="API-BUTTON">this is a test </button>
        <p id="API-RESULT">this is the result</p>
    </center>

    <footer id="footer-copyright" class="footer-copyright">
        <div class="container">
            <div class="hm-footer-copyright text-center">
                <p>&copy; copyright A Jammin Life</p>
            </div>
        </div>

        <div id="scroll-Top">
            <div class="return-to-top">
                <i class="fa fa-angle-up " id="scroll-top"></i>
            </div>
        </div>
    </footer>

    <script src="assets/js/jquery.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
        let sessionId = null;
        let userId = Math.random().toString(36).substring(2); // Unique ID for each user
        let selections = [];
        let totalUsers = 0;
        let completedUsers = 0;

        document.getElementById('generateCode').onclick = function() {
            axios.post('http://localhost:3000/create-session').then(response => {
                sessionId = response.data.sessionId;
                alert('Generated Session Code: ' + sessionId);
                document.getElementById('sessionCode').value = sessionId;
            }).catch(error => {
                console.error(error);
                alert('Error generating session code');
            });
        };

        document.getElementById('startSession').onclick = function() {
            sessionId = document.getElementById('sessionCode').value;
            if (!sessionId) {
                alert('Please enter a valid session code');
                return;
            }
            axios.post('http://localhost:3000/join-session', { sessionId }).then(response => {
                document.getElementById('startSession').disabled = true;
                alert('Session started. Make your selections.');
            }).catch(error => {
                console.error(error);
            });
        };

        document.getElementById('submitSelection').onclick = function() {
            axios.post('http://localhost:3000/submit-selection', {
                sessionId,
                userId,
                selections
            }).then(response => {
                alert('Selections submitted');
                axios.get(`http://localhost:3000/get-matches/${sessionId}`).then(response => {
                    totalUsers = response.data.totalUsers;
                    completedUsers = response.data.completedUsers;
                    if (completedUsers === totalUsers) {
                        document.getElementById('showMatches').disabled = false;
                    }
                }).catch(error => {
                    console.error(error);
                });
            }).catch(error => {
                console.error(error);
                alert('Error submitting selections');
            });
        };

        document.getElementById('showMatches').onclick = function() {
            axios.get(`http://localhost:3000/get-matches/${sessionId}`).then(response => {
                const matches = response.data.matches;
                let matchContainer = document.getElementById('matchResults');
                matchContainer.innerHTML = '<h3>Matched Dinners:</h3>';
                matches.forEach(matchId => {
                    let match = dinners.find(dinner => dinner.id === matchId);
                    matchContainer.innerHTML += `<p>${match.name}</p>`;
                });
            }).catch(error => {
                console.error(error);
                alert('Error fetching matches');
            });
        };

        const dinners = [
            { id: 1, name: "Pizza", imageUrl: "assets/images/pizza.jpg" },
            { id: 2, name: "Pasta", imageUrl: "assets/images/pasta.jpg" },
            { id: 3, name: "Burger", imageUrl: "assets/images/burger.jpg" },
            { id: 4, name: "Ramen", imageUrl: "assets/images/ramen.jpg" },
            { id: 5, name: "Sushi", imageUrl: "assets/images/sushi.jpg" },
            { id: 6, name: "Katsu", imageUrl: "assets/images/katsu.jpg" },
            { id: 7, name: "Cold Noodles", imageUrl: "assets/images/coldnoodles.jpg" },
            { id: 8, name: "Pho", imageUrl: "assets/images/pho.jpg" },
            { id: 9, name: "Pork", imageUrl: "assets/images/pork.jpg" },
            { id: 10, name: "Beef", imageUrl: "assets/images/beef.jpg" },
            { id: 11, name: "Chicken Galbi", imageUrl: "assets/images/chickengalbi.jpg" },
            { id: 12, name: "Curry & Naan", imageUrl: "assets/images/curry&naan.jpg" },
            { id: 13, name: "Pad Thai", imageUrl: "assets/images/padthai.jpg" },
            { id: 14, name: "Shabu Shabu", imageUrl: "assets/images/shabushabu.jpg" },
            { id: 15, name: "Jokbal", imageUrl: "assets/images/jokbal.jpg" },
            { id: 16, name: "Fried Chicken", imageUrl: "assets/images/friedchicken.jpg" },
            { id: 17, name: "Bossam", imageUrl: "assets/images/bossam.jpg" },
            { id: 18, name: "Maratang", imageUrl: "assets/images/maratang.jpg" },
            { id: 19, name: "Lamb Skewers", imageUrl: "assets/images/lambskewers.jpg" },
            { id: 20, name: "Yakitori", imageUrl: "assets/images/yakitori.jpg" },
            { id: 21, name: "Gopchang", imageUrl: "assets/images/gopchang.jpg" },
            { id: 22, name: "Lamb Galbi", imageUrl: "assets/images/lambgalbi.jpg" },
            { id: 23, name: "Kebab", imageUrl: "assets/images/kebab.jpg" },
            { id: 24, name: "Gamjatang", imageUrl: "assets/images/gamjatang.jpg" },
            { id: 25, name: "Jjajangmyeon", imageUrl: "assets/images/jjajangmyeon.jpg" },
        ];

        function renderCards() {
            let container = document.getElementById('dinnerCards');
            container.innerHTML = '';
            dinners.forEach(function(dinner) {
                let card = document.createElement('div');
                card.className = 'dinnerCard';
                card.setAttribute('data-id', dinner.id);
                card.innerHTML = `<img src="${dinner.imageUrl}" alt="${dinner.name}"><p>${dinner.name}</p>`;
                card.onclick = function() {
                    let dinnerId = parseInt(card.getAttribute('data-id'), 10);
                    if (!selections.includes(dinnerId)) {
                        selections.push(dinnerId);
                        card.style.opacity = '0.6';
                    }
                };
                container.appendChild(card);
            });
        }

        document.addEventListener('DOMContentLoaded', renderCards);
    </script>
</body>

</html>
